apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: todo-app

# Base resources
resources:
  - ../base/namespace.yaml
  - ../base/postgres/secret.yaml
  - ../base/postgres/deployment.yaml
  - ../base/postgres/service.yaml
  - ../base/backend/deployment.yaml
  - ../base/backend/service.yaml
  - ../base/frontend/deployment.yaml
  - ../base/frontend/service.yaml

# Patches for Minikube (add NodePort services)
patches:
  - path: patches/nodeport-services.yaml
    target:
      kind: Service

# Common labels
commonLabels:
  environment: minikube
  deployment: phase-iv
